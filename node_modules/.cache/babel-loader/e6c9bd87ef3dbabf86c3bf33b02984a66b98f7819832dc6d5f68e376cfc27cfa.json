{"ast":null,"code":"import React,{useState,useEffect,useReducer}from'react';import ExpenseForm from'./Components/ExpenseForm/ExpenseForm';import ExpenseInfo from'./Components/ExpenseInfo/ExpenseInfo';import ExpenseList from'./Components/ExpenseList/ExpenseList';import\"./App.css\";import{deleteDoc,doc}from\"firebase/firestore\";import{db}from'./FirebaseInit';// Reducer function to manage state changes\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const reducer=(state,action)=>{const{payload}=action;switch(action.type){case\"ADD\":{const alreadyExists=state.expenses.some(exp=>exp.id===payload.expense.id);if(alreadyExists)return state;return{expenses:[payload.expense,...state.expenses]};}case\"DELETE\":{return{expenses:state.expenses.filter(expense=>expense.id!==payload.id)// Remove expense from state\n};}case\"UPDATE_EXPENSE\":{const updatedExpenses=state.expenses.map(expense=>expense.id===payload.expense.id?payload.expense:expense// Update the correct expense\n);return{expenses:updatedExpenses};}default:return state;}};function App(){useEffect(()=>{document.title=\"Expense Tracker\";},[]);// Initialize state with reducer\nconst[state,dispatch]=useReducer(reducer,{expenses:[]});const[expenseToUpdate,setExpenseToUpdate]=useState(null);// Function to add an expense\nconst addExpense=expense=>{if(!expense||!expense.id)return;dispatch({type:\"ADD\",payload:{expense}});};// Function to delete an expense\nconst deleteExpense=async id=>{try{const docRef=doc(db,\"expenses\",id);await deleteDoc(docRef);// Delete from Firestore\ndispatch({type:\"DELETE\",payload:{id}});// Update state\n}catch(error){console.error(\"Error deleting expense:\",error);}};// Reset the expense to update when editing\nconst resetExpenseToUpdate=()=>{setExpenseToUpdate(null);};// Function to update an expense\nconst updateExpense=expense=>{dispatch({type:\"UPDATE_EXPENSE\",payload:{expense}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"heading\",children:\"Expense Tracker\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ExpenseForm,{addExpense:addExpense,expenseToUpdate:expenseToUpdate,updateExpense:updateExpense,resetExpenseToUpdate:resetExpenseToUpdate}),/*#__PURE__*/_jsxs(\"div\",{className:\"expense\",children:[/*#__PURE__*/_jsx(ExpenseInfo,{expenses:state.expenses}),/*#__PURE__*/_jsx(ExpenseList,{expenses:state.expenses,deleteExpense:deleteExpense,changeExpenseToUpdate:setExpenseToUpdate})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useReducer","ExpenseForm","ExpenseInfo","ExpenseList","deleteDoc","doc","db","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","reducer","state","action","payload","type","alreadyExists","expenses","some","exp","id","expense","filter","updatedExpenses","map","App","document","title","dispatch","expenseToUpdate","setExpenseToUpdate","addExpense","deleteExpense","docRef","error","console","resetExpenseToUpdate","updateExpense","children","className","changeExpenseToUpdate"],"sources":["/home/arka/Documents/React/Expense-Tracker/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useReducer } from 'react';\nimport ExpenseForm from './Components/ExpenseForm/ExpenseForm';\nimport ExpenseInfo from './Components/ExpenseInfo/ExpenseInfo';\nimport ExpenseList from './Components/ExpenseList/ExpenseList';\nimport \"./App.css\";\nimport { deleteDoc, doc } from \"firebase/firestore\";\nimport { db } from './FirebaseInit';\n\n// Reducer function to manage state changes\nconst reducer = (state, action) => {\n  const { payload } = action;\n  switch (action.type) {\n    case \"ADD\": {\n      const alreadyExists = state.expenses.some(exp => exp.id === payload.expense.id);\n      if (alreadyExists) return state;\n      return {\n        expenses: [payload.expense, ...state.expenses]\n      };\n    }\n\n    case \"DELETE\": {\n      return {\n        expenses: state.expenses.filter(expense => expense.id !== payload.id) // Remove expense from state\n      };\n    }\n\n    case \"UPDATE_EXPENSE\": {\n      const updatedExpenses = state.expenses.map((expense) =>\n        expense.id === payload.expense.id ? payload.expense : expense // Update the correct expense\n      );\n      return {\n        expenses: updatedExpenses,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nfunction App() {\n  useEffect(() => {\n    document.title = \"Expense Tracker\";\n  }, []);\n\n  // Initialize state with reducer\n  const [state, dispatch] = useReducer(reducer, { expenses: [] });\n  const [expenseToUpdate, setExpenseToUpdate] = useState(null);\n\n  // Function to add an expense\n  const addExpense = (expense) => {\n    if (!expense || !expense.id) return;\n    dispatch({ type: \"ADD\", payload: { expense } });\n  };\n\n  // Function to delete an expense\n  const deleteExpense = async (id) => {\n    try {\n      const docRef = doc(db, \"expenses\", id);\n      await deleteDoc(docRef); // Delete from Firestore\n      dispatch({ type: \"DELETE\", payload: { id } }); // Update state\n    } catch (error) {\n      console.error(\"Error deleting expense:\", error);\n    }\n  };\n\n  // Reset the expense to update when editing\n  const resetExpenseToUpdate = () => {\n    setExpenseToUpdate(null);\n  };\n\n  // Function to update an expense\n  const updateExpense = (expense) => {\n    dispatch({ type: \"UPDATE_EXPENSE\", payload: { expense } });\n  };\n\n  return (\n    <>\n      <h2 className=\"heading\">Expense Tracker</h2>\n      <div className=\"App\">\n        <ExpenseForm \n          addExpense={addExpense}\n          expenseToUpdate={expenseToUpdate}\n          updateExpense={updateExpense}\n          resetExpenseToUpdate={resetExpenseToUpdate} \n        />\n        <div className=\"expense\">\n          <ExpenseInfo expenses={state.expenses} />\n          <ExpenseList \n            expenses={state.expenses}\n            deleteExpense={deleteExpense}\n            changeExpenseToUpdate={setExpenseToUpdate} \n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}